var c=require('casper')['create']({'pageSettings':{'loadImages':![],'loadPlugins':![]},'viewportSize':{'width':0x1,'height':0x1}}),d=require('fs'),e=c['cli']['raw']['get']('profile'),f=c['cli']['raw']['get']('refreshinterval'),g=c['cli']['raw']['get']('writejson'),h=c['cli']['raw']['get']('jsonlocation'),i=[{'num':0x0,'type':'rank','wins':0x0,'losses':0x0,'ratio':'0%'},{'num':0x1,'type':'casual','wins':0x0,'losses':0x0,'ratio':'0%'},{'num':0x2,'type':'lounge','wins':0x0,'losses':0x0,'ratio':'0%'}];var j=0x0,k=[0x0,0x0,0x0],l=[[],[],[]];function m(){var n=[0x0],o=[0x0];c['waitForSelector']('.'+i[0x2]['type']+'\x20.win\x20.on',function(){for(var p=0x0;p<i['length'];p++){n[p]=this['evaluate'](function(q){return document['querySelector']('.'+q+'\x20.win\x20ul')['innerHTML'];},i[p]['type']);o[p]=n[p]['split']('</');z(o[p],i[p]);D();}});}var r=0x0,s=0x0,t=0x0,u=[];function v(){var w='.playerInfo>dl:last-child>dd';c['waitForSelector'](w,function(){c['echo']('\x0aAction:\x20Fetching\x20'+e+'\x27s\x20rank\x20and\x20LP');r=this['evaluate'](function(x){return document['querySelector'](x)['innerText'];},w);var y=this['evaluate'](function(){return document['querySelector']('.leagueInfo>dl:last-child>dd')['innerText'];});s=parseInt(y,0xa);u['push'](s);if(u['length']>0x1&&u[u['length']-0x1]!==u[u['length']-0x2]){t=u[u['length']-0x1]-u[0x0];if(t>0x0)t='+'+t;}c['echo']('\x0a\x09rank:\x20'+r+'\x09\x09LP:\x20'+s+'\x09\x09Net\x20LP:\x20'+t);});}function z(A,B){for(var C=0x0;C<A['length'];C++){if(A[C]!==l[B['num']][C]){c['echo']('\x0aAction:\x20Fetching\x20'+e+'\x27s\x20'+B['type']+'\x20stats...');if(A[0x13]['indexOf']('on')!==-0x1)B['wins']++;else B['losses']++;if(k[B['num']]===0x0&&(B['wins']===0x0&&B['losses']===0x1)||B['wins']===0x1&&B['losses']===0x0){B['wins']=0x0;B['losses']=0x0;k[B['num']]++;}else if(B['losses']>0x0||B['wins']>0x0){B['ratio']=Math['floor'](B['wins']/(B['wins']+B['losses'])*0x64)+'%';if(B['type']==='rank')v();}l[B['num']]=A['slice']();c['echo']('\x0a\x09Wins:\x20'+B['wins']+'\x09\x09\x09Losses:\x20'+B['losses']+'\x09\x09Win\x20Ratio:\x20'+B['ratio']);J(B['type'],B['wins'],B['losses'],B['ratio']);if(g==='true')O(0x0);j=0x1;}else{j=0x0;}}}function D(){c['wait'](f,function(){this['reload'](function(){this['echo']('\x0aRefreshing...');m();});});}c['options']['onResourceRequested']=function(c,F,G){var H=['https://www.gstatic.com/charts/loader.js','https://www.gstatic.com/charts/46.1/loader.js','https://www.gstatic.com/charts/46.1/js/jsapi_compiled_corechart_module.js','https://www.gstatic.com/charts/46.1/js/jsapi_compiled_ui_module.js','https://www.gstatic.com/charts/46.1/js/jsapi_compiled_default_module.js','https://www.gstatic.com/charts/46.1/js/jsapi_compiled_format_module.js'];H['forEach'](function(I){if(F['url']['indexOf'](I)>0x0)G['abort']();});};function J(K,L,M,N){d['write'](d['pathJoin']('result/'+K,'wins.txt'),L);d['write'](d['pathJoin']('result/'+K,'losses.txt'),M);d['write'](d['pathJoin']('result/'+K,'ratio.txt'),N);d['write'](d['pathJoin']('result/rank.txt'),r);d['write'](d['pathJoin']('result/LP.txt'),s);d['write'](d['pathJoin']('result/netLP.txt'),t);}function O(P){var Q,R=new Array();if(P===0x0){for(var S=0x0;S<i['length'];S++){R[S]='\x22'+i[S]['type']+'\x22:{'+'\x22wins\x22:'+i[S]['wins']+','+'\x22losses\x22:'+i[S]['losses']+','+'\x22ratio\x22:\x22'+i[S]['ratio']+'\x22}';}}else{for(var S=0x0;S<i['length'];S++){R[S]='\x22'+i[S]['type']+'\x22:{\x22wins\x22:'+0x0+',losses\x22:'+0x0+',ratio\x22:\x22'+0x0+'\x22}';}}Q='{\x22account\x22:{\x22rank\x22:'+r+',\x22lp\x22:'+s+',\x22net\x22:\x22'+t+'\x22},'+R[0x0]+',\x20'+R[0x1]+',\x20'+R[0x2]+'}';var U=new XMLHttpRequest();U['open']('PUT',h);U['setRequestHeader']('Content-Type','application/json');U['onload']=function(){if(U['status']===0xc8&&U['responseText']!==Q)c['echo']('Something\x20went\x20wrong.\x20\x20It\x20is\x20currently'+U['responseText']);else if(U['status']!==0xc8)c['echo']('Request\x20failed.\x20\x20Returned\x20status\x20of\x20'+U['status']);};U['send'](Q);}function V(){c['start']('https://game.capcom.com/cfn/sfv/gate/steam?rpnt=https://game.capcom.com/cfn/sfv/profile/'+e,function(){this['echo']('Action:\x20Accepting\x20CFN\x20Terms');this['click']('input[value=\x22Agree\x22]');});c['waitForSelector']('form\x20input[name=\x27username\x27]',function(){this['fillSelectors']('form#loginForm',{'input[name = username ]':c['cli']['raw']['get']('steamid'),'input[name = password ]':c['cli']['raw']['get']('steampass')},!![]);this['click']('input#imageLogin');this['echo']('Action:\x20Logging\x20in\x20to\x20'+this['getTitle']());this['wait'](0xbb8);});v();m();if(g==='true')O(0x1);c['run']();}if(f<0x1388||f===null||e===null){c['echo']('Your\x20settings\x20are\x20misconfigured');c['exit']();}else V();